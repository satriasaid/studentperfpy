import streamlit as st
import joblib
import pandas as pd
import numpy as np

# Load the saved Random Forest model, scaler, mean encoder, ordinal encoder, and rare encoder
try:
    model = joblib.load('rent_rf.joblib')
    scaler = joblib.load('rent_minmax_scaler.joblib')
    mean_encoder = joblib.load('rent_mean_encoder.joblib')
    ordinal_encoder = joblib.load('rent_ordinal_encoder.joblib')
    rare_encoder = joblib.load('rent_rare_encoder.joblib')
except Exception as e:
    st.error(f"Error loading models: {str(e)}")
    st.stop()

st.title("Apartment Rent Price Estimator")

# Group inputs into sections with expanders and columns for compactness

with st.expander("Basic Information", expanded=True):
    col1, col2, col3 = st.columns(3)
with col1:
    category = st.selectbox('Category', ['Apartment', 'Condo', 'House', 'Townhouse'])
    bathrooms = st.number_input('Bathrooms', min_value=0, max_value=10, value=1)
    bedrooms = st.number_input('Bedrooms', min_value=0, max_value=10, value=2)
    fee = st.selectbox('Fee', ['Yes', 'No'])
    has_photo = st.selectbox('Has Photo', ['Yes', 'No'])
    with col2:
        square_feet = st.number_input('Square Feet', min_value=100, max_value=10000, value=800)
        cityname = st.selectbox('City Name', ['Redondo Beach','Newport News','Raleigh','Vacaville','Albuquerque','Hampton','Lakewood','Charleston','Chatsworth','Alpharetta','Marblehead','Washington','Scottsdale','Ames','Kirkland','San Antonio','Villa Park','Oxford','Portland','Austin','Round Rock','Georgetown','Ladera Ranch','West Palm Beach','Kansas City','Pittsburgh','Urbandale','Allston','San Jose','Oakland','Mission Viejo','Berkeley','Madison','Windsor','Sherman Oaks','Concord','Arlington','Alexandria','Dallas','Chicago','Tulsa','Ogden','Orlando','Providence','Spokane Valley','Somerset','Urbana','Lafayette','Champaign','Sacramento','Lees Summit','Jacksonville','Orange','Boulder','Owings Mills','Saint Petersburg','Houston','Saint Louis','Kent','Oklahoma City','Edwardsville','West Bend','Bowling Green','Ridgefield','Nashville','Dickinson','Omaha','Fort Smith','Carlsbad','Arvilla','Seattle','Battle Creek','Annapolis','Grand Forks','Philadelphia','Vancouver','La Vista','Cedar Park','University Place','Cincinnati','Pearland','Brunswick','Hawthorne','Pleasanton','Laveen','Conyers','Tallahassee','Edmond','Waterloo','Gainesville','College Station','West Lafayette','Burleson','Maricopa','Tucson','Bellevue','Forest Lake','Greeley','Atlanta','Fremont','Tampa','San Bernardino','Lake Forest Park','Federal Way','New Bedford','Baltimore','Monument','Kailua','Parsippany','Lithonia','Cocoa Beach','Grand Junction','Blanco','Forest Grove','Miami Beach','Birmingham','Jonesboro','Milwaukee','Lemon Grove','Fort Worth','Winter Garden','Leander','Doylestown','Provo','Fernandina Beach','Detroit','Long Beach','Gilroy','Brookline','Boise','San Francisco','Columbia','Meridian','Davenport','Eugene','State College','Mishawaka','Rochester','Manhattan','Glendale','Peoria','Columbus','Morrisville','Charlotte','Fountain Valley','Indianapolis','Antioch','Spring Hill','Ballwin','Bismarck','Los Angeles','Duarte','Clayton','Salt Lake City','Chubbuck','Denver','Santa Clarita','Brandon','Troy','Macon','Paducah','Oregon City','Tustin','Sioux Falls','Pflugerville','Aurora','North Hollywood','Hillsborough','Humble','Acworth','Gonzales','Baton Rouge','Weslaco','Altamonte Springs','Franklin','Des Moines','West Des Moines','Bloomington','Greenville','Abilene','Edgerton','Mosinee','Garner','Placentia','Plymouth','Eagan','Hamilton','Colorado Springs','Haverhill','Anchorage','Tacoma','Athens','Fort Belvoir','College Park','Lawrenceville','Odessa','Phoenix','Santa Rosa','Horseshoe Bay','Clarkston','Woodland Hills','Florence','Minot','Mandan','Calera','Hattiesburg','Holt','Glen Burnie','Saint Francis','Cypress','Mission','Conway','Goodlettsville','Springfield','Tuscaloosa','West Fargo','Van Wert','Loganville','Grand Prairie','Dublin','Overland Park','South Dartmouth','Midland','Richmond','Upland','Hackensack','Valley Village','Minneapolis','Ooltewah','Honolulu','Yukon','Brookfield','Milford','Grand Haven','Lubbock','Lady Lake','Brick','Mckinney','Dayton','Oxnard','Mansfield','Laurel','Gaithersburg','Beaverton','Cedar Falls','Saint George','Pendleton','Lexington','Fitchburg','Culver City','Wilmington','Douglasville','Lowell','Medford','Irving','Glenn Heights','West Linn','American Fork','Coronado','Minnetonka','La Mesa','Auburn','Rapid City','Chattanooga','Tempe','Crozet','Woodbury','Wayne','Mendota Heights','Trenton','Sarasota','Hope Mills','Gardendale','West Hollywood','Ferndale','Norwich','Miami','Anaheim','Saint Paul','Woodstock','Buffalo','Reno','Litchfield','Evansville','Lincoln','Appleton','Elkhart','Winchester','Las Vegas','Broken Arrow','Fishers','Memphis','Frankfort','Plano','Baytown','San Ramon','Bothell','Boston','Little Rock','Sugar Land','Fort Pierce','Johnson City','Albany','Bellingham','Selah','Irondale','Livermore','Kaneohe','Lynchburg','Bella Vista','Traverse City','Westlake Village','Yakima','Sunnyvale','Gardner','Allendale','Green Bay','Hot Springs','Ruskin','Stockbridge','Snellville','Gladstone','Danbury','Venice','West Haven','West Hartford','Fayetteville','Coatesville','Fargo','Irmo','Cheyenne','West Allis','Weymouth','Arvada','Liverpool','Missouri City','Mesquite','Spring','Ann Arbor','Oakland Township','De Soto','Red Oak','Palo Alto','San Diego','Chanhassen','Belmont','Kokomo','Fort Myers','Elkhorn','East Grand Forks','Mason','Encino','San Pablo','Fort Collins','De Pere','Everett','Lynnwood','North Kansas City','Apopka','Salem','Saint Cloud','Janesville','Flagstaff','Naples','Saint Joseph','Hammond','Beaver Dam','Fond Du Lac','Camby','Noblesville','Saint Louis Park','Eagle River','Broomfield','North Richland Hills','Youngsville','Durham','Crosby','Elizabeth','Ashland','Rowlett','Denton','Murray','South Burlington','Savannah','Rogers','Wichita Falls','Huntington Beach','Escondido','Paoli','Monroe','Louisville','Lenexa','Longwood','Midwest City','Shorewood','Dubuque','Davidson','Chula Vista','Council Bluffs','Meriden','Oviedo','Johnston','Manchester','Nashua','Toledo','Ortonville','Marshall','Brea','Englewood','Leavenworth','Grandview','Euless','Ypsilanti','Smyrna','Anderson','Woburn','Channelview','Palm Coast','Glenville','Amarillo','Golden','Wauwatosa','San Mateo','Bremerton','Springdale','Manahawkin','Iowa City','Terrell','Oceanside','Castle Rock','Asheville','Westchase','Highland','Riverside','Washington Township','Leland','Harrison','Mountain View','Northville','Cameron','Goodyear','Leonia','Riverview','Clinton','Mobile','Ripon','Saginaw','Plainfield','Hillsboro','Clackamas','Independence','Westfield','Belleville','Fairfax','Puyallup','Schofield','Hyattsville','Fort Lauderdale','Cambridge','League City','Lansing','Shaker Heights','Palo Cedro','San Marcos','Duluth','Spokane','Temecula','Pontiac','New Braunfels','Roanoke','Auburn Hills','Sterling Heights','Oak Island','National City','Bentonville','Mustang','Alhambra','Rolla','Weatherford','Tulare','Bixby','Richardson','Holly Hill','Billings','Evanston','Farmers Branch','Tomball','Valrico','Harrison Township','Rialto','Pensacola','Dunwoody','Bryan','Winter Park','Henderson','Elk River','New Brunswick','Cassopolis','Gresham','Lake Orion','Greensboro','Artesia','San Leandro','Chelsea','Port Chester','West Columbia','Gilbert','Sandy','Port Arthur','Poulsbo','Newton','Sartell','Midlothian','Milledgeville','Cameron Park','Dexter','Aloha','Willis','Montgomery','Coeur D Alene','Santa Monica','Galveston','Encinitas','Camarillo','North Sioux City','Huntersville','Murfreesboro','Kissimmee','Bossier City','Pennsauken','Mililani','Palm Springs','Tigard','Redmond','Greenwood','Converse','Walnut Creek','Ozark','Nixa','Hudson','Maumee','Logansport','Greenfield','Waukesha','Landover','Seatac','West Valley City','Mesa','Decatur','Cumming','Woodway','Topeka','Ellensburg','Wasilla','Kernersville','Wahpeton','Wichita','Bastrop','Gretna','Merriam','Greendale','Lake Charles','Media','Nacogdoches','Farmington Hills','Canoga Park','Rancho Santa Margarita','Vallejo','Cedar Hill','Vadnais Heights','Pasadena','Lorton','Roswell','Moreno Valley','Manitou Springs','Cordova','West Orange','Waverly','Sioux City','Elizabethtown','Muncie','Lawrence','East Lansing','Vermilion','Garland','New Orleans','Fort Wayne','Longmont','Rancho Cucamonga','Terre Haute','Berlin','Desoto','Platte City','Lytle','Big Rapids','Moore','Hermosa Beach','Brighton','Knoxville','La Jolla','Shreveport','Lincoln Park','Little River','Vidor','Essexville','Hoover','Loveland','Kaukauna','Bolingbrook','Langley','Syracuse','Gastonia','Reseda','Torrance','Southfield','Corunna','Harlingen','Renton','San Juan Capistrano','Manassas','Canby','Beaumont','Kenosha','Elwood','Frederick','Santa Fe','Chandler','Porter','Somerville','Bensenville','Clarksville','Brooklyn Center','Lebanon','Mahomet','Littleton','Valdosta','Paragould','Bridgewater','Destin','Slc','Youngstown','Tea','Thousand Oaks','Scappoose','Bath','Lake Forest','Stanton','Neenah','Fullerton','Moraine','Covina','Fall River','Cheney','Walled Lake','Reading','Ankeny','North Haven','Lufkin','Burlington','New York','Ridley Park','Pikesville','Blacksburg','Rotterdam','Hamden','Canal Fulton','Kalamazoo','Campbell','Grand Rapids','Marietta','Carbon Cliff','Hartford','Savoy','Parkersburg','Yuba City','Vero Beach','Elyria','Mooresville','New Haven','Mauldin','Pulaski','O Fallon','Katy','Thornton','Buford','Portsmouth','Watford City','Box Elder','Sausalito','Saratoga Springs','Coulee Dam','Coraopolis','Corsica','Flint','Millburn','Gansevoort','Rancho Palos Verdes','Fort Walton Beach','Newport Beach','Lake Oswego','Vista','Kutztown','Norfolk','Murrieta','Stockton','Carbondale','San Clemente','Addison','Yorktown','Giddings','Maumelle','Hoschton','Starkville','Apache Junction','Bakersfield','Vernon','Altoona','Bear','Wausau','Fort Lupton','Cedar Rapids','Hortonville','Hilliard','Westerville','Olathe','Kingwood','Andover','Mountlake Terrace','Doral','Webster','Lancaster','Crowley','Papillion','Menlo Park','Elgin','Poplar Bluff','Cleveland Heights','Menifee','Secane','Bozeman','Hurricane','Santa Barbara','Panorama City','Storrs','Hollywood','American Canyon','Stillwater','Lutz','Helotes','Arnold','Walla Walla','Tukwila','Brockport','North Muskegon','New Carlisle','Kingsport','Church Hill','Jersey City','Anthem','Silver Spring','Lakeville','Golden Valley','San Pedro','Stone Mountain','Watertown','Lake Elsinore','Woodinville','Marina Del Rey','Ridgewood','Mound','San Ysidro','Santa Ana','Devils Lake','Irvine','Milwaukie','Corvallis','Chapel Hill','Agoura Hills','Edmonds','Rexburg','Clinton Township','Wheaton','El Paso','Reston','Toluca Lake','Wakefield','Grandy','Sault Sainte Marie','Leawood','Cupertino','Snoqualmie','Brooklyn','Owasso','Cleveland','Gulfport','Corpus Christi','Fairless Hills','Sugar Hill','Ocala','Chiefland','Menasha','Bethlehem','Ingalls','Jackson','Ramsey','Brentwood','Woodbridge','North Miami','Suwanee','Manassas Park','Harvey','Stafford','West Deptford','Yorkville','Homewood','Matthews','Montecito','Edina','Universal City','Shenandoah','Kill Devil Hills','Silverton','Folsom','Westland','Fenton','Harrisburg','Aiea','Camas','Hayward','Downey','Inglewood','Broomall','New Castle','Radnor','Ramona','Fernley','Crystal','Moses Lake','Saint Augustine','Enterprise','Northridge','Santa Clara','Berkley','Fredericksburg','Mcdonough','Oak Park','Tolleson','Oxon Hill','Potomac','Alameda','Dike','Beloit','Weston','New London','Warsaw','Wamego','Newark','Covington','Brownsburg','Novi','Pembroke Pines','Martinez','Clearwater','Wenatchee','Lexington Park','Locust','Reeds Spring','Mcminnville','Bountiful','Bainbridge Island','Geneva','Corona Del Mar','Canyon Lake','Taylorsville','Happy Valley','White Plains','Danville','Hendersonville','Mayville','Frisco','Snohomish','Spring Park','Plant City','West Covina','Kenmore','Hixson','Bend','Port Orange','Sun Prairie','Port Richey','Kennesaw','Hemet','Selma','Moorpark','Chapin','Bay Saint Louis','Middletown','North Tonawanda','Porterville','Ingleside','Piscataway','Coralville','Sheboygan','Michigan City','Buena Park','North Salt Lake','Mequon','Eden Prairie','Maitland','Blue Springs','Prairie Village','Tiverton','Waukee','Cherry Hill','Corona','Issaquah','Framingham','Zachary','Dumas','Findlay','Beverly Hills','Palm Desert','Moorhead','Huntsville','Ruston','Hopkins','Monticello','Naperville','Klamath Falls','Daytona Beach','Cliffside Park','Charlestown','Downers Grove','Jupiter','Norman','Arcadia','Panama City Beach','York','Newburyport','Liberty Hill','Costa Mesa','Montclair','Hinesville','Londonderry','Loves Park','Orem','Riverton','Maple Shade','Natchitoches','Mundelein','Van Nuys','Cornelius','Canton','La Verne','Mount Clemens','Oroville','Wilkes Barre','Troutdale','Normal','Portage','Carmel','Fuquay Varina','Branson','Gravette','San Luis Obispo','Centennial','Purvis','Malibu','Lakeway','Revere','Rock Hill','Aledo','Pierre','Washington Terrace','Shawnee','Bradenton','Ponte Vedra','Greer','Lehi','Shelby Township','Sunset Valley','Mcallen','Bradley','Mercedes','Orinda','Morgan Hill','Redwood City','Milpitas','Los Gatos','Rochester Hills','Midvale','Fox Point','Peru','Surprise','Whittier','Cary','Lanham','Morrow','Parker','Leon Valley','Bridgeport','Worcester','Plattsmouth','La Habra','Castle Hills','La Vergne','Bettendorf','Avon','Indianola','North Liberty','Rogersville','Hickory','Racine','Rocky Mount','Santa Cruz','Hampstead','Port Orchard','Grand Ledge','Manitowoc','New Holstein','Mankato','Berrien Springs','Apex','Westwood','Yonkers','Hales Corners','Blaine','Carnegie','Westminster','Roseville','Saint Marys','North Fort Myers','Norwalk','Coppell','Lewisville','Herndon','Rockville','Coral Gables','Austell','East Boston','Wildomar','Towson','Lone Tree','La Crosse','Kankakee','Horicon','Adelphi','Ontario','Rosenberg','Battle Ground','Deltona','Williston','New Canton','Glenmont','Lodi','Fountain','Port Saint Lucie','Royal Oak','Bacliff','Germantown','Rye','Surfside Beach','Hummelstown','Paulden','Highlands Ranch','Tewksbury','Salisbury','Delaware','Redding','Crossville','Round Hill','Sebastian','Maryville','Waynesville','Freeland','Cibolo','Platteville','Longview','West New York','Binghamton','Castro Valley','Villa Rica','El Cajon','Kyle','Olympia','Tarpon Springs','Whitefish Bay','Edgewater','Apple Valley','Mount Holly','El Mirage','Santee','Coventry','Talbott','Slidell','Dalton','Saint Leonard','Wilton Manors','Live Oak','Christiansburg','West Saint Paul','Ridgecrest','Red Bluff','Rockford','Jeffersonville','Angleton','Goffstown','Hazelwood','Summit','Carrboro','San Rafael','Fontana','Commerce City','null','Verona','Lewes','Scarborough','Taylor','Hermitage','Kirkwood','Burke','Burley','Cottage Grove','New Berlin','Shawnee Mission','Warren','La Quinta','Aberdeen','Jenks','Hampshire','Garden Grove','Franklin Lakes','Kannapolis','Pawtucket','Celebration','Sour Lake','Petersburg','Alvin','Hiram','Malden','Schenectady','Del Mar','Mukwonago','Buckeye','Stoughton','Wilton','Broadview Heights','Northglenn','Pingree Grove','Missoula','Powder Springs','Grandview Heights','Dundee','Ventura','Oscoda','Keizer','Canonsburg','White Bear Lake','Upper Darby','Waxhaw','Orange Park','Surf City','Houghton','Haymarket','South Milwaukee','Joppa','New Port Richey','North Las Vegas','Springtown','Skillman','Burnsville','Coon Rapids','Farmington','Anoka','Mahtomedi','Denville','Marquette','Bethesda','Easton','Junction City','South Weymouth','Sammamish','Mill Creek','Sanford','Lake Worth','Saint Amant','Nevada','Orland Park','Dewitt','Chaska','Niceville','Post Falls','Myrtle Beach','Sterrett','Discovery Bay','Charlottesville','Cape Girardeau','South Saint Paul','Ivins','Chevy Chase','Cullowhee','Boone','Oakdale','Sterling','Boca Raton','Newberg','Delafield','Medford Lakes','Middleton','North Bergen','Chesapeake','Sleepy Hollow','Bellflower','Indian Trail','New Brighton','Hyde Park','Waldorf','Abington','Saint Johns','Dania Beach','Maple Rapids','Takoma Park','Pacifica','Mount Airy','Studio City','Inver Grove Heights','Wesley Chapel','North Potomac','New Rochelle','Larchmont','Wimauma','Winter Springs','Monroeville','Lilburn','Pampa','Newport','Reynoldsburg','Sidney','Beulah','Cottonwood Heights','Tyler','Glens Falls','La Puente','Briarwood','Maple Grove','Hartland','Palestine','Clermont','Butler','Cartersville','Sparks','Moline','Menomonee Falls','Elk Grove','Brown Deer','Carrollton','Utica','Bryn Mawr','El Segundo','El Dorado','Amherst','Seal Beach','Metairie','Oakland Park','North Bethesda','Mechanicsville','Wyoming','Loomis','Union City','Rock Island','Anniston','Grove','Des Plaines','Winston Salem','Merced','Grimes','Rahway','Pewaukee','Stayton','Maplewood','Fort Lee','New Bern','Braintree','Amsterdam','Bowie','Homestead','High Point','Centreville','Enumclaw','Leesburg','Waukegan','Van Buren','Milan','Williamsport','Fairfield','East Orange','Sierra Vista','Methuen','Sherwood','Dana Point','Lake Balboa','Barstow','Harker Heights','Essex Junction','Boulder City','Hutchinson','Camden','Dover','Central City','Pine Valley','West Caldwell','Joliet','Waconia','Pahrump','Opa Locka','Waterbury','Grand Blanc','Brockton','Cumberland','Gouverneur','Keyser','Pompano Beach','Easley','Chesterfield','Mc Farland','Soldotna','Streetsboro','Park Ridge','Bridgeton','Key Biscayne','New Kensington','Cedar City','Cutler Bay','Beech Grove','Kaysville','Marysville','Audubon','Rosemount','Alpine','Spanaway','Calumet City','Pottstown','Cape Coral','Benton','Northbrook','Bridge City','Paris','Belgrade','Coral Springs','Hanover','Highland Park','Meeker','Sugar Notch','Union','Jamaica Plain','Henrico','Tarrytown','Bellwood','Raytown','Lauderhill','Cutler Ridge','Stow','Stoneham','Barberton','Palm Harbor','Greenbelt','Beachwood','Riverdale','Mebane','Princeton','Randallstown','Bloomingdale','Plainsboro','East Pittsburgh','Clairton','Roselle Park','Bedford','Glassboro','Ellicott City','Blackwood','Pico Rivera','Edgewood','Cockeysville','Fairborn','Florham Park','Roseland','Wharton','Flanders','Budd Lake','Needham','Cliffwood','Windermere','South Easton','Randolph','Upper Marlboro','Fulton','Suitland','Fort Washington','Ansonia','Grapevine','East Hartford','Mckeesport','Tuckerton','Somerdale','Elkridge','Azle','Winooski','Pueblo','Willingboro','Clementon','Montebello','Abingdon','Playa Del Rey','West Long Branch','Texarkana','Commerce','Long Branch','Needham Heights','Knightdale','Jessup','Euclid','South Plainfield','Short Hills','Virginia Beach','Mount Rainier','Bladensburg','Willoughby','Graham','Westbrook','Leesville','Groton','Princeton Junction','Presto','North Versailles','Monrovia','Rocky Hill','Williamstown','Linden','Hoboken','Newton Highlands','Clarksburg','Burtonsville','Derwood','Goldsboro','Elmwood Park','Bullock','Brook Park','Maple Heights','Temple Hills','Scotch Plains','East Rutherford','Wickliffe','Clemmons','Severn','Perry Hall','Spencer','Reisterstown','Sierra Madre','Belle Mead','Mc Kees Rocks','Crofton','Winsted','Odenton','Absecon','Linthicum Heights','Oaklyn','Maple Valley','Aliquippa','Mount Laurel','Fallston','Los Alamitos','Tipp City','South Yarmouth','Centerville','Eatontown','Moncure','Batavia','West Chester','Chester','Bayonne','Niles','Butner','Westlake','North Royalton','District Heights','Jamestown','Sheffield Lake','Norwood','Bostic','South Pasadena','Sewickley','Glenshaw','Lutherville Timonium','Mercer Island','Stratford','Bloomfield','Rutland','Signal Hill','Carson','Bennington','Somersworth','Lumberton','Newmarket','Kingston','Bellmawr','Barrington','Piqua','Bel Air','Lyndhurst','Neptune City','Manson','Amelia','Wooster','Akron','Buies Creek','Melrose','Bedford Heights','Quincy','Capitol Heights','Beltsville','Toms River','Lawrence Township','Hurst','Norcross','Sunland','Atlantic City','Collingswood','Wexford','Medina','Pitman','Lima','Marlton','Cerritos','Keene','Miamisburg','Cedar Knolls','Merrimack','Taunton','Raynham','Middlesex','Holly Springs','Caldwell','Massillon','Battle Mountain','Rosemead','North Port','Hasbrouck Heights','Casar','Newcastle','Weatogue','Cleburne','Glastonbury','Ellington','Penns Grove','Piketon','Gambrills','Haddonfield','Swanzey','La Mirada','Vandalia','Raymond','Spring Lake','Kearny','Attleboro','Micro','Atlantic Highlands','Garfield','Carteret','Waltham','Creedmoor','Broadway','Thomasville','Macedonia','Cherryville','Granbury','La Canada Flintridge','Millersville','Beaver Falls','Secaucus','Seabrook','Voorhees','Barnegat','South Orange','Chatham','Derry','Wake Forest','Englishtown','Montgomery Village','Wellesley','Jensen Beach','Newton Upper Falls','Springboro','Ocoee','Middleboro','Valley City','Milton','Bahama','Suffolk','Annapolis Junction','Perrysburg','Kennedale','Somers Point','Vernon Rockville','Peebles','Jamaica','Beverly','New Providence','Morris Plains','Mount Arlington','North Attleboro','North Dartmouth','North Arlington','Wareham','Buzzards Bay','Avondale Estates','Saddle Brook','Mount Orab','Lawndale','West Newton','Maineville','West Bridgewater','Bunn','Dunedin','East Weymouth','Wadsworth','Irvington','Sun Valley','Sharon','Boiling Springs','Turtle Creek','South Park','Allison Park','El Reno','Natrona Heights','Runnemede','Colchester','Bristol','Marion','Dacula','Matawan','Keyport','South Gate','Chestnut Hill','Newtonville','Grand Lake','Waldwick','Pembroke','Duxbury','Benson','Tallmadge','Strongsville','Brooksville','Roslindale','Greenwich','Wrightstown','Ringoes','Wethersfield','Millville','Noble','Freedom','Thurman','Colonia','Zebulon','Willow Spring','Fairhaven','Neptune','Freehold','Manhattan Beach','Prince George','Gardena','Newton Center','Silverthorne','Leadville','Whitman','Carson City','Cuyahoga Falls','Roselle','Nutley','Wood Ridge','West Roxbury','North Olmsted','Livingston','North Ridgeville','Caroleen','Ashford','Elizabeth City','Cranbury','Bethany','Bidwell','Gloucester City','Lindale','Passaic','Melissa','Garwood','South Boston','Stuart','Cresskill','Totowa','Tiffin','Orrville','Windham','Elko','Painesville','Ashtabula','Bangor','Wrentham','Sylvania','Rural Hall','Simsbury','Guthrie','Snowmass Village','Mantua','New Durham','Paramount','Hinsdale','Laconia','Belcamp','Temple','Howell','Auburndale','Rockland','Bucyrus','Pelham','Holbrook','Mentor','Coshocton','Cranford','Mocksville','Holland','Willimantic','Pauls Valley','Hightstown','Montrose','Egg Harbor City','Swedesboro','Paulsboro','Magnolia','Clark','Troup','Plainville','Asbury Park','Huntington Park','Compton','Claremont','Hanson','Olmsted Falls','Winthrop','Bordentown','Bethel Park','Sicklerville','Dolores','Moorestown','Hammonton','Exeter','Lomita','Hawaiian Gardens','Netcong','Saddle River','East Bridgewater','Incline Village','Pine Brook','Mattapan','Walpole','University Park','Havre De Grace','Moultonborough','Bellbrook','Stem','Sandwich','Damascus','Clifton','Kremmling','North Canton','Uniontown','Dennison','Fruitland Park','Holiday','Gardnerville','Roxbury','San Marino','Tujunga','Vineland','Tolland','Enfield','Pacific','Bridgeville','Derby','Canon City','Colebrook','Meredith','Rutherford','Bullard','Dennis Port','Pacific Palisades','North Waltham','Avenel','West Nottingham','Sugarcreek','Alliance','Dunnellon','Point Pleasant Beach','Pleasantville','Merchantville','Thorofare','Whitehouse','Morganville','Palisades Park','Montvale','Colonial Heights','Cedar Grove','Dillon','Loudonville','Inverness','California','Saco','Pineville','Jewett City','Eagle','Ambridge','Blanchard','Forest Hill','Rehoboth','Wellesley Hills','East Canton','Silver Springs','Rocky River','Eastlake','Steubenville','Ellenton','Lisbon','Grambling','Sewell','Stowe','North Conway','Seekonk','Breckenridge','Mahwah','Little Falls','Oldsmar','Solon','Avon Lake','Nelsonville','Haddon Heights','Tilton','Hooksett','Wallington','Evans','Orleans','Anna','East Wareham','East Sandwich','Ripley','Staunton','North Weymouth','Ravenna','Savage','Homosassa','Lorain','Longboat Key','Byesville','Fairview','West Monroe','Jones','Pomeroy','Xenia','Rockaway','Mattapoisett','Blanchester','Lillington','Cabin John','Poquoson','Carlin','Scituate','South Windsor','Altadena','North Easton','Land O Lakes','Reidsville','Rock Creek','Palmetto','Oregon','Cheshire','Paterson','Bozrah','Midland Park','Fair Lawn','East Windsor','Palmyra','Barre','Mc Arthur','La Palma','Hooks','South Chatham','Barnstable','North Tazewell','Waban','Lynwood','Boonton','Cortland','Summerfield','Browns Summit','Asheboro','Deep River','Branford','Newington','Oakmont','Mount Ephraim','Shaftsbury','Shrewsbury','Pompton Lakes','Crystal River','East Liverpool','New Lexington','South Portland','East Lyme','Chaplin','Westville','Whippany','Dighton','La Plata','Taftville','Sparks Glencoe','Wilmerding','Wilson','Delta','Durango','Dunkirk','Campton','Churchville','Fostoria','Hernando','Belleview','Marriottsville','Donora','Paulding','Belpre','Stirling','Diana','Little Ferry','Mineral Ridge','Pomfret','Northwood','Augusta','Cripple Creek','Marstons Mills','Palos Verdes Peninsula','Madison Heights','Forest','Raphine','Goshen','Mascotte','South Hill','Suncook','Carver','Great Mills','Mayodan','Galion','Struthers','Galesville','Pittsfield','Epping','Grayson','Jaffrey','Coats','Whitsett','Piedmont','Johnstown','Kittrell','Joshua','Chillicothe','Santa Fe Springs','Richlands','South Lebanon','Crownsville','Shelby','Bluffton','Hebron','Mabank','North Bennington','Duquesne','Peyton','Wendell','Erie','Red Bank','Purcell','Groveland','Harrah','Pennsville','Harbor City','Pierce','Haw River','Yarmouth','Emory','River Forest','Manasquan','Haslet','Storrs Mansfield','Choctaw','Snowmass','West Wareham','West Mifflin','Big Sandy','Warrenton','North Hampton','Edgewater Park','New Milford','Berkeley Heights','Hopewell','Palm City','Prospect Park','Empire','Franklinton','Lusby','Mc Donald','East Hampton','Prince Frederick','Yadkinville','Potsdam','Thibodaux','Kuna','Lockhart','Waco','Marshfield','Fresno','Miramar','Valdese','Falls Church','Arcata','Rome','Spanish Fork','Cayce','Holladay','Killeen','Lomira','Phenix City','Clovis','Davis','Hutto','Winterville','Nampa','Levittown','North Little Rock','Mc Lean','Newburgh','Sequim','Rigby','Crystal Lake','Woodward','Marana','Essex','Helena','Blytheville','Westbury','Westtown','Jackson Heights','Spring Valley','Valparaiso','Macomb','New Iberia','Gloucester','Plattsburgh','Sherman','Northport','Schiller Park','Dothan','Daphne','Wetumpka','Jesup','Opelika','Bay Minette','Lithia Springs','Windsor Mill','Henrietta','Layton','Cabot','Idaho Falls','Chappaqua','Henning','North Miami Beach','Heber Springs','Hallandale Beach','Edinburg','Rockledge','Elk Point','Eau Claire','Queens','Ashburn','Key West','Fort Thomas','Southern Pines','Parkville','Annandale','Morris','Haysville','Valencia','Florida City','Weirton','Circle Pines','Astoria','Huntingdon Valley','South Lake Tahoe','Flemington','Imperial Beach','Lake Point','Center Conway','Sag Harbor','Yankeetown','Guilderland','Prescott Valley','Rego Park','Flushing','Columbia Heights','Baldwin Park','Far Rockaway','Ennis','Bell Gardens','Calabasas','Santa Paula','Kaaawa','Sylmar','Soda Springs','Kew Gardens','Bridgton','Halifax','Mitchell','Seneca','Arco','Delphi','Lynn','Tunnel Hill','Lagrange','Las Cruces','Waipahu','Bayside','Fairdale','Mechanicsburg','Zanesville','Pittsburg','Avondale','Perkins','Fairview Park','Aventura','Glen Allen','Early','Chambersburg','Rock Springs','Huron','North Aurora','Marbleton','Lander','Tehachapi','Flomaton','Murphysboro','Mount Vernon','Highwood','Elmhurst','Endicott','Ithaca','Brownwood','East Falmouth','Taylors','Sunnyside','Lake Grove','Hayes','Clemson','Swampscott','Williamsburg','North Billerica','Laughlin','Marco Island','Dracut','Kenner','Hingham','Cohasset','Peabody','Forney','Saugus','Dedham','Kemp','Denham Springs','Westford','Saint James City','Port Charlotte','New Albany','Waxahachie','Canal Winchester','Billerica','Tonopah','Hopkinton','Destrehan','Acton','Erlanger','Redlands','Liberal','Bonita Springs','Spotsylvania','Abbeville','Chelmsford','Sudbury','Marlborough','Blacklick','Tioga','Yucaipa','Vienna','San Bruno','Buffalo Junction','Lynnfield','Washington Court House','Mulberry','Westborough','Lakeland','Victorville','Northborough','The Colony','Wylie','Lewis Center','Natick','Owensboro','Stanley','Colton','Agawam','Chico','Rancho Cordova','Russellville','Grove City','Sun City','Dawson Springs','Grand Island','Bartow','North Oxford','Pinellas Park','Largo','Grand Terrace','Tyngsboro','North Andover','Wheat Ridge','Hopkinsville','West Springfield','Arden','Lyndon','Saint Matthews','Radcliff','Flower Mound','Allen','Centerton','Pickerington','Wauchula','Washburn','Candler','Jeffersontown','Indio','Harrisonburg','Paradise Valley','Duncanville','Rockwall','Circleville','Winter Haven','Fort Mitchell','Litchfield Park','Halstead','Jefferson City','Hull','Balch Springs','Marianna','Estero','Lake Wales','Temperanceville','Great Falls','El Dorado Hills','Woodland','Bealeton','Daleville','Danvers','Prairieville','Groveport','Lehigh Acres','Powell','Pataskala','Houma','Sunderland','Athol','Chanute','West Sacramento','South Salt Lake','Capistrano Beach','Collinsville','Corsicana','Ipswich','Amesbury','West Memphis','Fort Eustis','Marrero','Citrus Heights','Tracy','Logan','Solana Beach','Manteca','Zephyrhills','Newnan','Clyde','Medway','Rowley','Waynesboro','Broussard','Pine Bluff','Wrightwood','Southbridge','Nevada City','Antelope','Rocklin','Cookeville','Sharpsburg','Modesto','Wilmer','North Chelmsford','Prosper','Fort Myers Beach','Arkadelphia','La Place','Prescott','Boxborough','Little Elm','Lake Dallas','North Brookfield','Townsend','Loma Linda','Joshua Tree','Bardstown','Dixon','Carmichael','Middlebury','Lahaina','Upper Sandusky','Stephenson','North Reading','Hope','Kingman','Kearney','Whitinsville','Grafton','Belchertown','Sachse','Forest Park','Poway','Hackett','Merrimac','Bokeelia','Alva','Chalmette','Latonia','Pembina','Jefferson','Ware','Chicopee','Adelanto','Yucca Valley','Twentynine Palms','Carolina Beach','Turlock','Altavista','Lunenburg','Helendale','Northampton','Ludlow','Holyoke','Sunset Beach','Holly Ridge','Yuma','Dodge City','Hays','Fair Oaks','Lithia','Carey','Newbury','Berryville','Punta Gorda','Corbin','Seminole','Pepperell','Millers Falls','Green Valley','Douglas','Desert Hot Springs','Blair','Loleta','Rancho Santa Fe','Nahant','Saint Martinville','Mandeville','Mc Crory','Hopedale','Raceland','Killdeer','Dudley','Millbury','Harvard','Easthampton','Big Bear Lake','Tasley','Rancho Mirage','Cathedral City','Carthage','Shingle Springs','Peachtree City','Wathena','Kenton','Siloam Springs','Lake Havasu City','Sedona','Ellendale','Cooperstown','Monson','South Riding','Brigham City','Medfield','Baskerville','Ruckersville','Timberville','Galloway','Bellemont','Leicester','Havelock','Hollister','Powhatan','Fountain Hills','Chantilly','Rossford','Foothill Ranch','North Grafton','Boylston','Ashby','South Hadley','Grass Valley','Sonoma','Apollo Beach','Warrensburg','Maynard','Cottonwood','Upton','Sugarloaf','Leominster','Ayer','Otis','North Adams','Hesperia','Oakton','El Centro','Banning','Garden City','Salina','Clever','Emporia','Culpeper','Eureka','Perris','Mapleton','Gwinner','Sahuarita','Weaverville','Knob Noster','Bristow','El Macero','Fayette','Vinton','Hazen','Smithfield','Dumfries','Highland Springs','Sebastopol','Lakeport','Smithville','Newman','Raymore','Royse City','Stanardsville','Wynne','King George','San Jacinto','Holliston','Prestonsburg','South Grafton','Rio Rico','Morehead City','Wittmann','Belt','Scott','Southborough','Scottsbluff','Carrington','Holden','Crete','Locust Grove','Black Mountain','Kure Beach','Joplin','North Highlands','Occidental','Sun City Center','Forestville','Flippin','Sunbury','Larned','Millis','Big Stone Gap','Campbellsville','Clearwater Beach','Crestline','Murphy','Forman','Pearce','Maiden','Oilville','Glasco','Liberty','Sparta','Curtis Bay','Forest Hills','Limerick','Dalhart','Branchland','Burbank','Bay City','Victoria','Olivette','Gary','North Augusta','Nazareth','Gallatin','Park Hills','North Brunswick','Kerrville','Parowan','Bloomfield Township','Glenwood','White Oak','Wallkill','Maspeth','Southington','Grants','Summerville','Huntington','Steilacoom','Sutton','Warrington','Monongahela','Hanford','Mount Pleasant','Wixom','Cohoes','Burlingame','North Myrtle Beach','Simi Valley','North Charleston','North Kingstown','Hialeah','King Of Prussia','Fort Mill','Clover','Hauppauge','Cranston','Ladson','North Wales','Harleysville','Grosse Pointe','Wyandotte','Salinas','Clifton Park','Simpsonville','Goose Creek','Huntington Station','Santa Maria','Lake Jackson','Clute','Rumford','Melbourne','Melvindale','Talladega','Ronkonkoma','Spartanburg','West Bloomfield','Conroe','Dearborn','Dearborn Heights','Crest Hill','South San Francisco','Hastings','Wallace','Sullivans Island','East Providence','Lansdale','Conshohocken','Norristown','Flat Rock','Cicero','East Greenbush','Lindsay','Moncks Corner','Poughkeepsie','Wappingers Falls','Davidsonville','Valley Stream','Freeport','Davison','Woonsocket','Warwick','Livonia','Aliso Viejo','Mount Prospect','Lake Villa','Calverton','Luthersville','Saint Charles','Herriman','West Jordan','Fairburn','Delray Beach','Palm Beach Gardens','Daly City','Rockville Centre','Melbourne Beach','Berwyn','Southgate','Fort Gratiot','Lombard','Scranton','Allentown','Lake Mary','Coolidge','Ballston Spa','Yorba Linda','Cocoa','Laguna Niguel','Laguna Hills','Bartlett','Wheeling','Breinigsville','Ferguson','Sergeant Bluff','Belmond','Valley Park','Florissant','Dunlap','Altamont','Grandville','Sandusky','Redford','Palm Bay','Trabuco Canyon','Broadview','Raeford','Titusville','Macungie','Staten Island','Collierville','Boynton Beach','Maryland Heights','Petaluma','Rohnert Park','Rockport','Muskegon','Sellers','Mc Clellanville','West Warwick','Carol Stream','Glen Ellyn','Warminster','Peekskill','Moscow','Oshkosh','Greensburg','Queen Creek','Griffin','Deerfield Beach','Vineyard','Fairmount','Imperial','Soddy Daisy','Darlington','Rectortown','Twin Falls','Casselberry','Cross Plains','Wellington','Biloxi','Emeryville','Ridgeland','Merrillville','Laredo','Camillus','Manvel','Visalia','Okemos','Sumter','Waterford','Tracys Landing','Malvern','Lisle','Laguna Beach','Marine City','Vernon Hills','Lock Haven','Kailua Kona','Grover','Saint Peters','Madisonville','Tucker','Vicksburg','Davie','Walden','Smithtown','Port Jefferson','Ozone Park','Middle Village','Manville','Plymouth Meeting','Eastpointe','Haverford','Fern Park','Blackfoot','Dade City','Lenoir City','Porterdale','Chino Hills','Morton','Manorville','Roscoe','Gray Court','Richton Park','Zion','Lansdowne','Bronxville','Glenolden','Archbald','Eustis','Stevens Point','Camp Hill','Lihue','Santa Rosa Beach','Atlantic Beach','Ormond Beach','Bensalem','Tooele','Roy','Jasper','Heber City','Larkspur','Pascagoula','Ocean Springs','Gulf Shores','Catonsville','Beeville','Los Altos','Alanson','Palmdale','Central Islip','California City','Lompoc','Commerce Township','West River','Hallandale','New Baltimore','Algonac','Buffalo Grove','Elk Grove Village','Bronx','Veradale','Dyersburg','Wildwood','Mableton','Gautier','Kingsville','San Gabriel','Old Hickory','Dundalk','Bessemer','Baldwinsville','Patchogue','Hamburg','Duncan','Walterboro','Great Neck','Norton','Nokesville','Langhorne','Ossining','Jim Thorpe','Newberry','Casa Grande','Bulls Gap','Capitola','Brookhaven','Aiken','Schertz','Clanton','Fairview Heights','Queensbury','Melville','Fair Play','Glen Mills','Woodridge','Matteson','Schaumburg','Hoffman Estates','Dekalb','Hatboro','Hartsdale','Panama City','Gold Hill','New Smyrna Beach','Flagler Beach','Yulee','Atkins','South Jordan','Piney Flats','Waleska','San Dimas','South Bend','Rosedale','Prior Lake','Warrior','Metamora','Blue Island','Midway City','Laguna Woods','Deland','Pooler','Jacksonville Beach','The Villages','Cardiff By The Sea','Clearfield','Scottsburg','Rowland Heights','Glendora','Azusa','Pleasant Hill','Seguin','Newbury Park','Earlville','East Saint Louis','Hewlett','Merritt Island','Ridge','Nanuet','Bala Cynwyd','Port Wentworth','Oak Creek','Lakeside','Novato','Yakutat','La Porte','Oakley','Canyon Country','Gwynn Oak','Millbrae','North Providence','Bloomfield Hills','Upperville','Clarks Summit','Rolling Meadows','Arlington Heights','Phoenixville','Bellefonte','Sutherlin','Pleasant Prairie','Muskego','Berkeley Springs','Fallbrook','Granger','Bemidji','Central','Mattoon','Hempstead','Smoaks','Olney','Wood Dale','Maywood','Ambler','Shelley','Roseburg','Wynnewood','Statesboro','Nicasio','Diamondhead','Crookston','El Cerrito','Victor','Watervliet','Madera','Society Hill','Lemoore','Haslett','Carpinteria','Holly','Central Falls','Blue Bell','Dania','Westmont','Romulus','Glendale Heights','Perkasie','Casanova','Kapolei','Exton','Oconomowoc','Fort Dodge','Roanoke Rapids','Fairbanks','Tonawanda','Tully','Oswego','Marina','Los Banos','Coram','Whitestone','College Point','East Greenwich','Harper Woods','Clawson','Narberth','Keaau','Warner Robins','Perry','Granite Quarry','Elkins','Ponte Vedra Beach','Watsonville','Pearl','Trussville','Bethalto','Rock Tavern','Half Moon Bay','Monterey','Groves','Tinley Park','Mohegan Lake','Grants Pass','West Richland','Albemarle','Roosevelt','Picayune','Halethorpe','Mechanicville','Texas City','Bayport','Kensington','Glenmoore','Cape Canaveral','Welcome','Lovettsville','Suffern','Felton','Girard','Waunakee','High Ridge','Pomona','Columbia City','La Grange','Central Valley','Mamaroneck','Richmond Hill','Flowery Branch','Wentzville','Wendover','Pleasant Grove','Hacienda Heights','Southaven','Middle River','Sparrows Point','Porter Ranch','Shakopee','Tarboro','Dunn Loring','Thompsons Station','Roseau','Mount Juliet','Napa','Prattville','Nottingham','Granada Hills','Osseo','Vestal','Albertville','Willow Grove'])
        state = st.selectbox('State', ['CA','VA','NC','NM','CO','WV','GA','MA','DC','AZ','IA','WA','TX','IL','MS','OR','FL','MO','PA','WI','OK','UT','RI','NJ','IN','MD','OH','TN','ND','NE','AR','MI','MN','HI','ID','SC','KS','AL','SD','NY','KY','LA','AK','CT','NV','WY','VT','NH','MT','DE','ME'])
        source = st.selectbox('Source', ['RentLingo', 'ListedBuy', 'RentDigs.com', 'RENTCafÈ', 'GoSection8', 'Listanza', 'RealRentals', 'RENTOCULAR', 'tenantcloud', 'Real Estate Agent', 'rentbits', 'Home Rentals', 'Nest Seekers', 'RentFeeder', 'vFlyer', 'Claz', 'Real Estate Shows', 'Seattle Rentals', 'BostonApartments', 'SpreadMyAd', 'Apartable', 'Z57', 'FreeAdsTime', 'AgentWebsite', 'HousesForRent'])
    with col3:
        AC = st.selectbox('AC', ['Yes', 'No'])
        Alarm = st.selectbox('Alarm', ['Yes', 'No'])
        Basketball = st.selectbox('Basketball', ['Yes', 'No'])
        Cable_or_Satellite = st.selectbox('Cable or Satellite', ['Yes', 'No'])

with st.expander("Amenities"):
    col1, col2, col3 = st.columns(3)
    with col1:
        Clubhouse = st.selectbox('Clubhouse', ['Yes', 'No'])
        Dishwasher = st.selectbox('Dishwasher', ['Yes', 'No'])
        Doorman = st.selectbox('Doorman', ['Yes', 'No'])
        Elevator = st.selectbox('Elevator', ['Yes', 'No'])
        Fireplace = st.selectbox('Fireplace', ['Yes', 'No'])
        Garbage_Disposal = st.selectbox('Garbage Disposal', ['Yes', 'No'])
        Gated = st.selectbox('Gated', ['Yes', 'No'])
        Golf = st.selectbox('Golf', ['Yes', 'No'])
    with col2:
        Gym = st.selectbox('Gym', ['Yes', 'No'])
        Hot_Tub = st.selectbox('Hot Tub', ['Yes', 'No'])
        Internet_Access = st.selectbox('Internet Access', ['Yes', 'No'])
        Luxury = st.selectbox('Luxury', ['Yes', 'No'])
        No_Amenities = st.selectbox('No Amenities', ['Yes', 'No'])
        Parking = st.selectbox('Parking', ['Yes', 'No'])
        Patio_Deck = st.selectbox('Patio/Deck', ['Yes', 'No'])
        Playground = st.selectbox('Playground', ['Yes', 'No'])
    with col3:
        Pool = st.selectbox('Pool', ['Yes', 'No'])
        Refrigerator = st.selectbox('Refrigerator', ['Yes', 'No'])
        Storage = st.selectbox('Storage', ['Yes', 'No'])
        TV = st.selectbox('TV', ['Yes', 'No'])
        Tennis = st.selectbox('Tennis', ['Yes', 'No'])
        View = st.selectbox('View', ['Yes', 'No'])
        Washer_Dryer = st.selectbox('Washer Dryer', ['Yes', 'No'])
        Wood_Floors = st.selectbox('Wood Floors', ['Yes', 'No'])
        Cats = st.selectbox('Cats', ['Yes', 'No'])
        Dogs = st.selectbox('Dogs', ['Yes', 'No'])
        No_Pets = st.selectbox('No Pets', ['Yes', 'No'])

# Convert 'Yes'/'No' to 1/0 for all relevant features
def yes_no_to_int(value):
    if value == 'Yes':
        return 1
    elif value == 'No':
        return 0
    else:
        return value

category = category  # Assuming category is categorical string, keep as is
cityname = cityname
state = state
source = source

fee = yes_no_to_int(fee)
has_photo = yes_no_to_int(has_photo)
AC = yes_no_to_int(AC)
Alarm = yes_no_to_int(Alarm)
Basketball = yes_no_to_int(Basketball)
Cable_or_Satellite = yes_no_to_int(Cable_or_Satellite)
Clubhouse = yes_no_to_int(Clubhouse)
Dishwasher = yes_no_to_int(Dishwasher)
Doorman = yes_no_to_int(Doorman)
Elevator = yes_no_to_int(Elevator)
Fireplace = yes_no_to_int(Fireplace)
Garbage_Disposal = yes_no_to_int(Garbage_Disposal)
Gated = yes_no_to_int(Gated)
Golf = yes_no_to_int(Golf)
Gym = yes_no_to_int(Gym)
Hot_Tub = yes_no_to_int(Hot_Tub)
Internet_Access = yes_no_to_int(Internet_Access)
Luxury = yes_no_to_int(Luxury)
No_Amenities = yes_no_to_int(No_Amenities)
Parking = yes_no_to_int(Parking)
Patio_Deck = yes_no_to_int(Patio_Deck)
Playground = yes_no_to_int(Playground)
Pool = yes_no_to_int(Pool)
Refrigerator = yes_no_to_int(Refrigerator)
Storage = yes_no_to_int(Storage)
TV = yes_no_to_int(TV)
Tennis = yes_no_to_int(Tennis)
View = yes_no_to_int(View)
Washer_Dryer = yes_no_to_int(Washer_Dryer)
Wood_Floors = yes_no_to_int(Wood_Floors)
Cats = yes_no_to_int(Cats)
Dogs = yes_no_to_int(Dogs)
No_Pets = yes_no_to_int(No_Pets)

input_dict = {
    'category': category,
    'bathrooms': bathrooms,
    'bedrooms': bedrooms,
    'fee': fee,
    'has_photo': has_photo,
    'square_feet': square_feet,
    'cityname': cityname,
    'state': state,
    'source': source,
    'AC': AC,
    'Alarm': Alarm,
    'Basketball': Basketball,
    'Cable or Satellite': Cable_or_Satellite,
    'Clubhouse': Clubhouse,
    'Dishwasher': Dishwasher,
    'Doorman': Doorman,
    'Elevator': Elevator,
    'Fireplace': Fireplace,
    'Garbage Disposal': Garbage_Disposal,
    'Gated': Gated,
    'Golf': Golf,
    'Gym': Gym,
    'Hot Tub': Hot_Tub,
    'Internet Access': Internet_Access,
    'Luxury': Luxury,
    'No Amenities': No_Amenities,
    'Parking': Parking,
    'Patio/Deck': Patio_Deck,
    'Playground': Playground,
    'Pool': Pool,
    'Refrigerator': Refrigerator,
    'Storage': Storage,
    'TV': TV,
    'Tennis': Tennis,
    'View': View,
    'Washer Dryer': Washer_Dryer,
    'Wood Floors': Wood_Floors,
    'Cats': Cats,
    'Dogs': Dogs,
    'No Pets': No_Pets
}

# Convert input to DataFrame
input_df = pd.DataFrame([input_dict])

# Apply rare encoding
try:
    if hasattr(rare_encoder, 'feature_names_in_'):
        rare_expected_columns = rare_encoder.feature_names_in_
        rare_columns_to_transform = [col for col in rare_expected_columns if col in input_df.columns]
        if rare_columns_to_transform:
            rare_subset = input_df[rare_columns_to_transform].copy()
            transformed_rare = rare_encoder.transform(rare_subset)
            input_df[rare_columns_to_transform] = transformed_rare
except Exception as e:
    st.error(f"Error with rare encoding: {str(e)}")

# Remove ordinal encoding step to avoid pyarrow dependency issues
# The ordinal encoding step is skipped in this refactor

# If needed, you can implement alternative encoding here, e.g., label encoding or one-hot encoding
# For now, we skip ordinal encoding to bypass the pyarrow issue

# Apply mean encoding
try:
    if hasattr(mean_encoder, 'feature_names_in_'):
        mean_expected_columns = mean_encoder.feature_names_in_
        mean_columns_to_transform = [col for col in mean_expected_columns if col in input_df.columns]
        if mean_columns_to_transform:
            mean_subset = input_df[mean_columns_to_transform].copy()
            transformed_mean = mean_encoder.transform(mean_subset)
            input_df[mean_columns_to_transform] = transformed_mean
except Exception as e:
    st.error(f"Error with mean encoding: {str(e)}")

# Apply scaling
try:
    if hasattr(scaler, 'feature_names_in_'):
        scaler_expected_columns = scaler.feature_names_in_
        scaler_columns_to_transform = [col for col in scaler_expected_columns if col in input_df.columns]
        if scaler_columns_to_transform:
            input_df[scaler_columns_to_transform] = scaler.transform(input_df[scaler_columns_to_transform])
except Exception as e:
    st.error(f"Error with scaling: {str(e)}")

if st.button('Estimate Rent Price'):
    try:
        prediction = model.predict(input_df)[0]
        st.success(f"Estimated Rent Price: ${prediction:,.2f}")
    except Exception as e:
        st.error(f"Error making prediction: {str(e)}")
        st.write("Input DataFrame:")
        st.write(input_df)
